package {{ env.java_package_entity }};

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

import javax.annotation.Generated;
import javax.persistence.*;
import javax.validation.constraints.*;
import java.io.Serializable;
import java.time.ZonedDateTime;

/**
 * {{ table.class_name }} entity base class.
 * Auto generated by JPA code generator.
 */
@Generated(value = "JPACodeGenerator")
@NoArgsConstructor
@AllArgsConstructor
@Data
@MappedSuperclass
{% if table.has_composite_primary_keys() %}
@IdClass(Abstract{{ table.class_name }}.PK.class)
{% endif %}
public abstract class Abstract{{ table.class_name }} implements Serializable {
    {% for column in table.columns %}
    {% if table.is_primary_key(column) %}
    @Id
    {% endif %}
    @Column(name = "{{ column.name }}")
    {% if column.auto_increment != "" %}
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    {% endif %}
    {% if column.is_not_null() and column.auto_increment == "" and column.name != "created_at" and column.name != "updated_at" %}
    @NotNull
    {% endif %}
    {% if column.field_size %}
    @Size(max = {{ column.field_size }})
    {% endif %}
    private {{ column.field_type }} {{ column.field_name }};

    {% endfor %}
    {% if table.has_composite_primary_keys() %}
    public PK pk() {
        return new PK({% for column in table.get_primary_key().get_columns() %}{{ column.field_name }}{% if not loop.last %}, {% endif %}{% endfor %});
    }

    @NoArgsConstructor
    @AllArgsConstructor
    @Getter
    @Embeddable
    public static class PK implements Serializable {
        {% for column in table.get_primary_key().get_columns() %}
        @Column(name = "{{ column.name }}")
        @NotNull
        private {{ column.field_type }} {{ column.field_name }};

        {% endfor %}
    }
    {% endif %}
}

